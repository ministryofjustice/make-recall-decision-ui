---
generic-service:
  nameOverride: make-recall-decision-ui

  replicaCount: 4

  image:
    repository: quay.io/hmpps/make-recall-decision-ui
    tag: app_version    # override at deployment time
    port: 3000

  ingress:
    enabled: true
    host: app-hostname.local    # override per environment
    tlsSecretName: make-recall-decision-cert
    annotations:
      nginx.ingress.kubernetes.io/limit-rpm: "200"

  allowlist:
    office: "217.33.148.210/32"
    quantum: "62.25.109.197/32"
    quantum_alt: "212.137.36.230/32"
    health-kick: "35.177.252.195/32"
    digitalprisons1: "52.56.112.98/32"
    digitalprisons2: "52.56.118.154/32"
    mojvpn: "81.134.202.29/32"
    j5-phones-1: "35.177.125.252/32"
    j5-phones-2: "35.177.137.160/32"
    sodexo-bronzefield: "51.148.9.201/32"
    sodexo-northumberland: "88.98.48.10/32"
    sodexo-northumberland2: "51.148.47.137/32"
    sodoxeo-forest-bank: "51.155.85.249/32"
    sodexo-peterborough: "51.155.55.241/32"
    serco: "217.22.14.0/24"
    durham-tees-valley: "51.179.197.1/32"
    oakwood-1: "217.161.76.187/32"
    oakwood-2: "217.161.76.195/32"
    oakwood-3: "217.161.76.186/32"
    oakwood-4: "217.161.76.194/32"
    dxc-mitcheldean: "195.92.38.16/28"
    ark-dom1-ttp1: "195.59.75.0/24"
    ark-dom1-farnborough: "194.33.192.0/24"
    ark-dom1-farnborough-psn: "51.247.3.0/24"
    ark-dom1-corsham: "194.33.196.0/24"
    ark-dom1-corsham-psn: "51.247.4.0/24"
    ark-dom1-non-live-1: "194.33.193.0/25"
    ark-dom1-non-live-2: "194.33.197.0/25"
    moj-official-ark-c-expo-e: "51.149.249.0/29"
    moj-official-ark-c-vodafone: "194.33.248.0/29"
    moj-official-ark-f-vodafone: "194.33.249.0/29"
    moj-official-ark-f-expo-e: "51.149.249.32/29"
    cloudplatform-live1-1: "35.178.209.113/32"
    cloudplatform-live1-2: "3.8.51.207/32"
    cloudplatform-live1-3: "35.177.252.54/32"
    interservfls: "51.179.196.131/32"
    sodexo1: "80.86.46.16/32"
    sodexo2: "80.86.46.17/32"
    sodexo3: "80.86.46.18/32"
    dxc_webproxy1: "195.92.38.20/32"
    dxc_webproxy2: "195.92.38.21/32"
    dxc_webproxy3: "195.92.38.22/32"
    dxc_webprox23: "195.92.38.23/32"
    moj-official-tgw-prod: "51.149.250.0/24"
    moj-official-tgw-preprod: "51.149.251.0/24"
    crc-rrp: "62.253.83.37/32"
    crc-pp-wwm: "5.153.255.210/32"
    fivewells-1: "20.49.214.199/32"
    fivewells-2: "20.49.214.228/32"
    fivewells-3: "195.89.157.56/29"
    fivewells-4: "195.59.215.184/29"
    global-protect: "35.176.93.186/32"
    petty-france-wifi: "213.121.161.112/28"
    pingdom-1: "5.172.196.188"
    pingdom-2: "13.232.220.164"
    pingdom-3: "23.22.2.46"
    pingdom-4: "23.83.129.219"
    pingdom-5: "23.92.127.2"
    pingdom-6: "23.106.37.99"
    pingdom-7: "23.111.152.74"
    pingdom-8: "23.111.159.174"
    pingdom-9: "23.238.193.202"
    pingdom-10: "37.252.231.50"
    pingdom-11: "43.225.198.122"
    pingdom-12: "43.229.84.12"
    pingdom-13: "46.20.45.18"
    pingdom-14: "46.246.122.10"
    pingdom-15: "50.2.185.66"
    pingdom-16: "50.16.153.186"
    pingdom-17: "52.0.204.16"
    pingdom-18: "52.24.42.103"
    pingdom-19: "52.48.244.35"
    pingdom-20: "52.52.34.158"
    pingdom-21: "52.52.95.213"
    pingdom-22: "52.52.118.192"
    pingdom-23: "52.57.132.90"
    pingdom-24: "52.59.46.112"
    pingdom-25: "52.59.147.246"
    pingdom-26: "52.62.12.49"
    pingdom-27: "52.63.142.2"
    pingdom-28: "52.63.164.147"
    pingdom-29: "52.63.167.55"
    pingdom-30: "52.67.148.55"
    pingdom-31: "52.73.209.122"
    pingdom-32: "52.89.43.70"
    pingdom-33: "52.194.115.181"
    pingdom-34: "52.197.31.124"
    pingdom-35: "52.197.224.235"
    pingdom-36: "52.198.25.184"
    pingdom-37: "52.201.3.199"
    pingdom-38: "52.209.34.226"
    pingdom-39: "52.209.186.226"
    pingdom-40: "52.210.232.124"
    pingdom-41: "54.68.48.199"
    pingdom-42: "54.70.202.58"
    pingdom-43: "54.94.206.111"
    pingdom-44: "64.237.49.203"
    pingdom-45: "64.237.55.3"
    pingdom-46: "66.165.229.130"
    pingdom-47: "66.165.233.234"
    pingdom-48: "72.46.130.18"
    pingdom-49: "72.46.131.10"
    pingdom-50: "76.72.167.154"
    pingdom-51: "76.72.172.208"
    pingdom-52: "76.164.234.106"
    pingdom-53: "76.164.234.130"
    pingdom-54: "82.103.136.16"
    pingdom-55: "82.103.139.165"
    pingdom-56: "82.103.145.126"
    pingdom-57: "85.195.116.134"
    pingdom-58: "89.163.146.247"
    pingdom-59: "89.163.242.206"
    pingdom-60: "94.75.211.73"
    pingdom-61: "94.75.211.74"
    pingdom-62: "94.247.174.83"
    pingdom-63: "96.47.225.18"
    pingdom-64: "103.10.197.10"
    pingdom-65: "103.47.211.210"
    pingdom-66: "104.129.24.154"
    pingdom-67: "104.129.30.18"
    pingdom-68: "107.182.234.77"
    pingdom-69: "148.72.170.233"
    pingdom-70: "148.72.171.17"
    pingdom-71: "151.106.52.134"
    pingdom-72: "159.122.168.9"
    pingdom-73: "162.208.48.94"
    pingdom-74: "162.218.67.34"
    pingdom-75: "162.253.128.178"
    pingdom-76: "168.1.203.46"
    pingdom-77: "169.51.2.18"
    pingdom-78: "169.54.70.214"
    pingdom-79: "169.56.174.151"
    pingdom-80: "172.241.112.86"
    pingdom-81: "173.248.147.18"
    pingdom-82: "173.254.206.242"
    pingdom-83: "174.34.156.130"
    pingdom-84: "175.45.132.20"
    pingdom-85: "178.162.206.244"
    pingdom-86: "178.255.152.2"
    pingdom-87: "178.255.153.2"
    pingdom-88: "179.50.12.212"
    pingdom-89: "184.75.208.210"
    pingdom-90: "184.75.209.18"
    pingdom-91: "184.75.210.90"
    pingdom-92: "184.75.210.226"
    pingdom-93: "184.75.214.66"
    pingdom-94: "184.75.214.98"
    pingdom-95: "185.39.146.214"
    pingdom-96: "185.39.146.215"
    pingdom-97: "185.70.76.23"
    pingdom-98: "185.93.3.65"
    pingdom-99: "185.136.156.82"
    pingdom-100: "185.152.65.167"
    pingdom-101: "185.180.12.65"
    pingdom-102: "185.246.208.82"
    pingdom-103: "188.172.252.34"
    pingdom-104: "190.120.230.7"
    pingdom-105: "196.240.207.18"
    pingdom-106: "196.244.191.18"
    pingdom-107: "196.245.151.42"
    pingdom-108: "199.87.228.66"
    pingdom-109: "200.58.101.248"
    pingdom-110: "201.33.21.5"
    pingdom-111: "207.244.80.239"
    pingdom-112: "209.58.139.193"
    pingdom-113: "209.58.139.194"
    pingdom-114: "209.95.50.14"
    pingdom-115: "212.78.83.12"
    pingdom-116: "212.78.83.16"

  livenessProbe:
    httpGet:
      path: /ping

  readinessProbe:
    httpGet:
      path: /health

  custommetrics:
    enabled: true
    scrapeInterval: 15s
    metricsPath: /metrics
    metricsPort: 3001

  # Environment variables to load into the deployment
  env:
    NODE_ENV: "production"
    REDIS_TLS_ENABLED: "true"
    TOKEN_VERIFICATION_ENABLED: "true"
    SENTRY_DSN: https://5c9e4014e8064f8c846bfbeb1810a32f@o345774.ingest.sentry.io/6360608
    AUDIT_SERVICE_NAME: "make-recall-decision-ui"
    AUDIT_SQS_REGION: "eu-west-2"

  # Pre-existing kubernetes secrets to load as environment variables in the deployment.
  # namespace_secrets:
  #   [name of kubernetes secret]:
  #     [name of environment variable as seen by app]: [key of kubernetes secret to load]

  namespace_secrets:
    make-recall-decision-ui:
      APPINSIGHTS_INSTRUMENTATIONKEY: "APPINSIGHTS_INSTRUMENTATIONKEY"
      API_CLIENT_ID: "API_CLIENT_ID"
      API_CLIENT_SECRET: "API_CLIENT_SECRET"
      SYSTEM_CLIENT_ID: "SYSTEM_CLIENT_ID"
      SYSTEM_CLIENT_SECRET: "SYSTEM_CLIENT_SECRET"
      SESSION_SECRET: "SESSION_SECRET"
    elasticache-redis:
      REDIS_HOST: "primary_endpoint_address"
      REDIS_AUTH_TOKEN: "auth_token"
    sqs-hmpps-audit-secret:
      AUDIT_SQS_ACCESS_KEY_ID: "access_key_id"
      AUDIT_SQS_SECRET_ACCESS_KEY: "secret_access_key"
      AUDIT_SQS_QUEUE_URL: "sqs_queue_url"
      AUDIT_SQS_QUEUE_NAME: "sqs_queue_name"

generic-prometheus-alerts:
  targetApplication: make-recall-decision-ui
