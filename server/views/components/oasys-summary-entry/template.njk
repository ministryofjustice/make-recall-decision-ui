{%- from "components/heading/macro.njk" import heading -%}
{%- from "components/alert-borderless/macro.njk" import alertBorderless -%}

<div
    class="car-oasys-summary-entry"
    data-qa="{{ params.dataQaAttr }}"
    data-analytics-event-scroll="{{ params.subtitle }}"
>
    {{ heading(params.heading, 3, 's', 'govuk-!-margin-bottom-1')}}

    <div class="govuk-grid-row">
        <span class="govuk-caption-m govuk-grid-column-two-thirds">{{ params.subtitle }}</span>
        <span class="govuk-caption-m govuk-!-text-align-right govuk-grid-column-one-third">Last updated: {{ formatDateTimeFromIsoString({ isoDate: params.lastUpdated, dateOnly: true, shortDate: true }) | safe }}</span>
    </div>

    <div class="govuk-!-margin-top-2">
        {% if params.error %}
            {% if params.error == 'NOT_FOUND_LATEST_COMPLETE' -%}
                {% set message = params.notifications.oasysNotFoundLatestComplete -%}
            {% elseif params.error == 'MISSING_DATA' %}
                {% set message = params.notifications.oasysMissingRosh -%}
            {% else %}
                {% set message = params.notifications.oasysApiError -%}
            {% endif %}
    
            {{
                alertBorderless({
                    variant: "error",
                    title: message,
                    showTitleAsHeading: false
                })
            }}
        {% endif %}

        {% if (params.error == "NOT_FOUND_LATEST_COMPLETE" or not params.error) and params.content %}
            <pre
                class="govuk-body"
                data-analytics-event-category="{{ params.attributes['data-analytics-event-category'] }}"
                data-analytics-event-label="{{ params.attributes['data-analytics-event-label'] }}"
            >
                {{ params.content }}
            </pre>
        {% endif %}
    </div>
</div>

<hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">