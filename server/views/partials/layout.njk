{% extends "govuk/template.njk" %}
{% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}
{% from "govuk/components/tag/macro.njk"                import govukTag %}
{% from "govuk/components/back-link/macro.njk"           import govukBackLink %}
{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/details/macro.njk"             import govukDetails %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/checkboxes/macro.njk"               import govukCheckboxes %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/textarea/macro.njk"            import govukTextarea %}
{% from "govuk/components/error-summary/macro.njk"       import govukErrorSummary %}
{% from "govuk/components/input/macro.njk"               import govukInput %}
{% from "govuk/components/panel/macro.njk" import govukPanel %}
{%- from "moj/components/sub-navigation/macro.njk" import mojSubNavigation -%}
{%- from "moj/components/search/macro.njk" import mojSearch -%}
{%- from "moj/components/badge/macro.njk" import mojBadge -%}
{%- from "moj/components/filter/macro.njk" import mojFilter -%}
{%- from "moj/components/task-list/macro.njk" import mojTaskList -%}
{% from "components/oasys-card/macro.njk"             import oasysCard %}
{% from "components/summary-card/macro.njk"             import appSummaryCard %}
{% from "components/rosh-widget/macro.njk" import roshWidget %}
{% from "components/predictor-indicator/macro.njk" import predictorIndicator %}
{% from "components/predictor-score/macro.njk" import predictorScore %}
{% from "components/predictor-timeline/macro.njk" import predictorTimeline %}
{% from "components/risk-flag-widget/macro.njk" import riskFlagWidget %}
{% from "components/mappa-widget/macro.njk" import mappaWidget %}
{% from "components/select-component/macro.njk" import selectComponent %}
{% from "components/form-submit-button/macro.njk"   import formSubmitButton %}
{% from "components/task-status/macro.njk"   import taskStatus %}
{% from "components/status-badge/macro.njk"   import statusBadge %}
{% from "components/info-panel/macro.njk"   import infoPanel %}
{% from "components/address/macro.njk"   import address %}
{% from "components/back-link/macro.njk"   import backLink %}
{% from "components/delius-details-message/macro.njk"   import deliusDetailsMessage %}
{% from "components/delete-recommendation-link/macro.njk"   import deleteRecommendationLink %}
{% from "components/paginate/macro.njk"   import paginate %}
{% from "govuk/components/accordion/macro.njk" import govukAccordion %}
{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
{%- from "moj/components/banner/macro.njk" import mojBanner -%}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{%- from "govuk/components/button/macro.njk" import govukButton -%}

{% block head %}
  {% include "./analytics.njk" %}
  <link href="/assets/stylesheets/application.css?{{ version }}" rel="stylesheet"/>
  <script src="/assets/js/jquery.min.js"></script>
  <script nonce='{{ cspNonce }}'>
    window.MOJFrontend = window.MOJFrontend || {};</script>
  <script src='/assets/moj/components/filter-toggle-button/filter-toggle-button.js'></script>
  {% block headEnd %}{% endblock %}
{% endblock %}

{% block pageTitle %}{{pageTitle | default(applicationName)}}{% endblock %}

{% block header %}
  {% include "./header.njk" %}
     {% if notification.isVisible %}
    {% set html %}
      {% if notification.header %}
        <p class="govuk-notification-banner__heading">
          {{ notification.header }}
        </p>
      {% endif %}
      <p class="govuk-body">{{ notification.body }}</p>
    {% endset %}

    {{ govukNotificationBanner({
      html: html
    }) }}
  {% endif %}
  {% include "./phaseBanner.njk" %}
{% endblock %}

{% block bodyStart %}
  {% if googleTagManagerId %}
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ googleTagManagerId }}"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  {% endif %}
{% endblock %}

    {% block footer %}
      {{ govukFooter({
        meta: {
          items: [
            {
              href: "/accessibility",
              text: "Accessibility"
            }
          ]
        }
      }) }}
    {% endblock %}

{% block bodyEnd %}
  {# Run JavaScript at end of the
  <body>, to avoid blocking the initial render. #}
  <script src="/assets/govuk/all.js"></script>
  <script src="/assets/govukFrontendInit.js"></script>
  <script src="/assets/moj/all.js"></script>
  <script src="/assets/web-vitals.iife.js" defer></script>
  <script src="/assets/analytics.js" defer></script>
  <script src="/assets/accessibility.js" defer></script>
  <script src="/assets/back-links.js" defer></script>
{% endblock %}
