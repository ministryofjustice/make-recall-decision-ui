{% set updateRecommendationButton %}
    <a class='govuk-button'
       href='/recommendations/{{ caseSummary.activeRecommendation.recommendationId }}/'
       data-analytics-event='click_cta' data-analytics-event-category='update_recommendation_click'>Update
        recommendation</a>
{% endset %}

{% if flags.flagConsiderRecall == true %}
    {% if user.hasSpoRole == false %}
        {% if not caseSummary.activeRecommendation %}
            <a class='govuk-button'
               href='{{ pageUrlBase }}consider-recall'
               data-analytics-event='click_cta' data-analytics-event-category='consider_recall_click' data-qa='consider-recall-button'>Consider a
                recall</a>
        {% elseif not caseSummary.activeRecommendation.recallConsideredList %}
            {{ updateRecommendationButton | safe }}
        {% endif %}
    {% endif %}
{% else %}
    {% if caseSummary.activeRecommendation.recommendationId %}
        {{ updateRecommendationButton | safe }}
    {% else %}
        <a class='govuk-button'
           href='{{ pageUrlBase }}create-recommendation-warning'
           data-analytics-event='click_cta' data-analytics-event-category='make_recommendation_click'>Make a
            recommendation</a>
    {% endif %}
{% endif %}